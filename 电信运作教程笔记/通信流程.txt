
一个用户的电话通过本地回路（所谓的双绞线）连接到服务提供商的网络中，接着，本地回路又连接到中心局的本地交换机。中心局本地交换机负责实施初始呼叫设置，通话维持，并在通话完成时实施切断

### 典型网络的基本流程

	1. 当用户把电话听筒从挂钩上摘下来，电话机中的一个交换机闭合，形成一个回路，让电流震动，因此产生一个拨号音，传入用户的耳朵中
	2. 用户听到拨号音以后，拨入要呼入的目的地址（电话号码）
	3. 交换机接收到电话号码后进行分析，通过分析区号和前面的附加信息，确定这个通话是否可以在本地交换机范围内完成，或是否必须离开本地交换机而传输到另外一个交换机
	4.
		如果呼叫确实属于本地通话，通话信息就突破交换机的外壳进入交换机，之后又在接收端本地回路上重新出现
		如果呼叫是一个跨区（toll call）或长途点计划（long distance call），信号就必须进入坚硬的交换机外壳，穿透器坚韧的内芯，又从交换机硬壳的另外一端离开，然后奔向一个远程的交换机
		注意：一个本地交换机并不知道有客户的存在和它自身职能之外的功能，所以，当它接收到一个电话号码，但它并不能处理的话，它就把这个号码转交给上一级的交换机
	5. 远程交换机从本地交换机哪里接收到这个电话号码，然后处理呼叫，建立所需的连接，然后通过长途电路把这个呼叫传送到远方的长途交换机
	6. 远程长途交换机将呼叫传递给远程的本地交换机，然后远程的本地交换机就把目的地的电话拨通，这样，通话就建立起来了
	
	拿起电话听筒的动作连通了一个电路，回路使电流从本地中心局的交换机流到电话机中
	交换机采用电子的手段，给电路附加一个振荡器（拨号音发生器 dial tone generator）
	拨号音的作用就是告诉用户，交换机已经做好准备，可以接收呼叫方要拨打的电话号码
	每按下一个数字键就会产生一个“音对”（pair of tones），有点刺耳，是要防止因为人们随意说话时产生的频率导致误拨，这种技术成为“双音多频（DTMF）”
	无线电话按下通话键（talk）就再手持机和基站之间建立一个无线电通路，然后形成回路
	所有的数字网络，如使用ISDN作为介入技术的网络，不会产生拨号音，因为数据包是不会产生声音的
	相反，ISDN信令系统（Q.931）发送一个“让电话振铃”的数据包到远方的电话机，电话机本身产生拨号音和振铃


拨号电话号码，交换机中的一个数字接收机接收到这些数字，然后，交换机对这些数字进行初步的分析，以确定这个号码是否应该有本交换机提供服务。交换机执行这个过程是通过查看号码的区号（编号计划区NPA）和交换局号（NXX）完成的
	电话号码：区号（NPA）+交换局号（NXX）+交换机所具体连接的号码
	
主叫和被叫所使用的交换局不同，这个呼叫必须被转移到另外一个中心局进行处理，这个路由建立前，主叫的本地交换机想信号网络发出一个问讯，这个信号网络被称为信号系统7（SS7），它为网络提供智能化服务
	SS7负责建立，维持和中断一个呼叫，同时允许访问强化服务（定制本地通信服务（CLASS），800号码可移植性，本地号码可移植性（LNP），线性信息数据库（LIDB）查询验证信用卡和其他的强化服务）
	SS7最初的设计理念是将公共电话网络上的现实通话与建立和终止童话的过程区分开来，从而使网络工作效率更高，这样可以把智能化要求从公共交换电话网络（PSTN）中简化出来，然后加入到另一个网络中，因为在这个新网络中可以达到一定程度的集中，所以能够为更为广泛的用户服务
	SS7网络由数据包交换机（信号传输点，STP）和智能数据库引擎（服务控制点，SCP）组成，它们相互连接，通过数字链路连接到现实的电话公司交换机上（服务交换点，SSP），这个网络典型的工作速度是56-64Kbps

### SS7 环境拨打电话

	本地交换机基础设备通过SSP发出一个软中断信号
	结果呼叫方和被叫方的信息就可以被传送给SS7网络，具体来说就是一个STP
	接着，STP把信息传送给一个相关的SCP，SCP执行数据库查找以决定是否需要特殊的呼叫处理指令。
	一旦SCP执行了它的任务，呼叫信息就被返回到STP数据包交换机
	STP数据包交换机查询路由表，为此呼叫建立一个路由。
	在接到呼叫后，目的地的交换机将和SS7配合，以判断被呼叫方的电话是否可以接通
		可以接通，交换机就让电话振铃
		因占线或者其他原因不能接通，一个数据包就会返回呼叫的发源地说明这个事实，SS7就会只是原SS7给呼叫用户发出忙音或重拨的提示
			呼叫方有几个选择，其中之一就是使用CLASS的众多服务之一，如自动回复功能（automatic ringback）（网络会在一段时间内监督被呼叫方的电话状态，等待线路可以接通，一旦线路可用后，呼叫就被建立，并通过不同的铃声通知呼叫方有呼入电话到来）
	
	当一个电话被连接到一个远程交换机时，呼叫信息就被传输到SS7
	SS7使用呼叫方的号码，被呼叫方的号码和SCP数据库信息为通话选择一个路由
	然后SS7判断是否应该激活一些特殊的呼叫处理措施，例如CLASS服务，并指示沿途的各个交换机正确处理通话
	
	SSP（交换机）负责基本的呼叫服务，SCP负责管理关于通话的强化服务，然后SS7网络负责呼叫建立和终止所需要的信号处理，及使用附加或强化服务

### 网络拓扑

电话、PC、调制解调器通过室内布线（house wiring，内线 inside wire）被连接到户外的一个“防护块”装置上，它是一个高压保护装置（出现雷电或其他高压情况下切断电路），既保护用户，也保护交换设备
这个保护器通过双绞线（twisted pair wire）和网络相连，双绞线就是一对电线相互缠绕，以降低包裹在电缆内部的电线对之间的串话和干扰，每英尺距离上双绞线的扭结个数是经过仔细计算的
为用户提供服务的双绞线到达用户的住宅的地方有用户引入线（drop wire），可架在空中或埋在地下。每一个用户引入线的位置可能有多对双绞线（普通家庭可能需要多条线路用于在家办公，使用计算机、传真机等等）
一旦双绞线到达用户房间边缘，用户引入线常常接入一个终端盒
从社区出来的所有双绞线跨接到主电缆上，主电缆有延伸到马路中心（这个结构简化管理）
用户回路载波技术（SLC）：系统中的用户可以通过共享的方式接入网络，使用一组T1载波线路将一批用户的传输信号结合起来

用户的本地回路，不论是专用线还是载波系统中的一个时隙，都通过网络的物理结构进行传输。如果用户本地回路必须要穿越相当长的距离，可以在途中增加一个电感线圈（作用是调整本地回路的频率，使之适合于语音传输，并延长信号传输的距离）
一个加载电位器（load pot）由多个电感线圈组成，为电缆中的所有需要的电缆对加载
如果用户本地回路是一个数字回路载波系统，可能会有一个转发器，转发器接受输入的信号（因长途跋涉强度变弱，噪声增大，转发器对信号进行重建放大，再把信号发送出去）

电杆：电话杆，由电话、电力、电缆供应商共用。电话线处于最低位置，然后是电缆线，电力线处于最高位置（电力线要安装得足够高，确保修理电话线和电缆线的工人不会意外碰到裸露的电力线导体部件）

一个电缆靠近中心电话局时，它的线对常常与其他抵达的电缆线对在接线盒内结合成一根大电缆，然后进入中心电话局。
进入中心电话局，电缆被分开，进行配线（在电缆室中进行）
电缆通过一个预埋的管道进入大楼的电缆室（大楼的最下一层地下室），因对地下管线系统敞开，有害易爆气体有可能进入地下室
为保证外部电缆的安全运行，用干燥空气给地下电缆加压，并用一个加压泵和复杂系统来维持电缆室中的压力（防止时期从小裂口进入电缆；一个主要电缆出现故障时，能起到报警的作用），电缆设备技术人员可以利用沿线布设的压力传感器传输的数据进行分析，精确确定出现故障的位置
大电缆被分解为易于操作的耐火小电缆后，离开电缆室到达主配线架（MDF）

电力问题：
笔记本供电并非由外部电力直接驱动，而是给电池充电，电池再给笔记本提供动力
中心电话局地下室安装了巨大的湿电池组，它们是中心局的动力来源
商业电源从电网的多个源头输送到大楼，避免仅仅依靠一个单一的电源
交流电被输入到一个转换器和滤波器中，被转换为48v的直流电，然后电流以涓流的方式存储到电池中，这个电压确保电池不断被充电，万一商业用电出现故障，大楼中的不间断电源（UPS）设备就开始工作，启动一系列的复杂时间，确保电话局的服务
	UPS确认电话局断电
	技术人员检测用电恢复，同时为了省电关闭一些不重要的系统
	UPS系统启动大楼的涡轮发电机（地下室中一个具有隔音功能的房间，或楼顶的封闭区域内）

拨打电话号码，呼叫信息通过空中或者地下的线路穿越本地回路，从电缆室进入中心电话局。呼叫信息从电缆室上行至主配线架，然后到达交换机，为主叫服务的中心电话局中的交换机接收到被叫号码，交换机执行SS7数据库查询，确定呼叫的位置，以及是否需要激活用户特殊服务。本地交换机将呼叫通过局内线路传输到一个中继交换机，中继交换机又将呼叫连接到长途服务提供商的POP（入网地址）。长途运营系统激活SS7功能，检查被叫是否可用，如果可以接通，长途运营系统就把呼叫转交到远程的本地服务提供商，被叫回话时，呼叫就别建立，通话正常进行

### 本地回路可以使无线的

	移动电话发出的呼叫被一个基站（Cell Tower）接收
	然后被转送到中心电话局中一个专用的移动电话交换机（移动电话交换局（MTSO））
	MTSO处理呼叫信息，并通过局间线路把呼叫转交给有线网络
	之后，移动电话的呼叫处理过程与普通电话的处理过程完全一样
	
	移动电话的呼叫既可以在本地交换机控制下完成，也可以被转交给中继交换机进行长途处理
	
	一个蜂窝网络真正的无线的唯一部分是本地回路

### VoIP 通话流程

	用户通过传统电话开始呼叫
	呼叫通过PSTN（公共交换电话网）传输到一个IP电话网关（特殊用途的路由器，为PSTN和一个数据包基础的IP网络建立接口）
	网关接到呼叫后，它就咨询一个有关的监控设备，监控设备提供自费标准，授权，认证和呼叫路由等方面的信息
	监控设备将信息传输给网关后
	网关把呼叫通过IP网络传输给另外一个网关
	这个网关再把呼叫转交给接收端的本地PSTN，完成呼叫
